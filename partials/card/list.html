<div class="lists row">
  <lang-bar nb-card="nbCard" lang="currentLang" langs="langs" all-langs="allLangs"></lang-bar>

  <section class="list col-md-2 col-xs-12" ng-repeat="list in lists">
    <header>
      {{ list }}
    </header>
    <content>
      <div ng-repeat="card in cards |list:list |orderBy:'rank'">
        <header>
          <span style="background-color:white">{{ card.num }}</span>
          <span class="pull-right"><b>{{ card.rank || 0 }}</b></span>
        </header>
        <translation field="title" object="card" save="save(id, field, text, from)">
          <a goto="card.list" project_id="{{ project.id }}" card_num="{{ card.num }}">
            {{ card.title.content }}
          </a>
        </translation>
        <p>
          <span style="background-color:red;color:white" ng-repeat="tag in card.tag_list">{{ tag |translate }}</span>
        </p>
        <span ng-show="card.cost_estimate && !card.payment">{{ card.cost_estimate }}€</span>
        <span ng-show="card.payment">{{ card.payment }}€/{{ card.cost_estimate }}€</span>
        <vote id="card.id" element="card" check="card.hasVote"></vote>
      </div>

      <!-- Add Card -->
      <div ng-show="showAddCard && $first">
        <textarea ng-disabled="loading" ng-blur="showAddCard=false" focus="showAddCard" ng-model="newcard.title" ng-keypress="saveNewCard($event)"></textarea>
        <span us-spinner ng-show="loading"></span>
      </div>
    </content>
    <footer ng-show="$first">
      <button class="btn btn-link" ng-disabled="login.isNotConnect()" ng-hide="showAddCard" ng-click="showAddCard=true">Add card</button>
    </footer>
  </section>
</div>
